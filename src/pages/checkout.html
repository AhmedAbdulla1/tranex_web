<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - TRANEX</title>
    <base href="https://tranex.site/" />
    <link rel="stylesheet" href="/src/styles/main.css">
    
    <!-- Component Loader -->
    <script type="module" src="src/utils/component-loader.js"></script>
</head>
<body>
    <!-- Header Component Container -->
    <div id="header-container"></div>
    
    <!-- Main Content -->
    <main class="main-content">
        <section class="checkout-section" id="checkout-page">
            <div class="container">
                <div class="section-header">
                    <h1 class="section-title" data-en="Checkout" data-ar="الدفع">Checkout</h1>
                </div>
                
                <div class="checkout-content">
                    <div class="checkout-form">
                        <h2 data-en="Billing Details" data-ar="تفاصيل الفاتورة">Billing Details</h2>
                        <form id="checkout-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName" data-en="First Name" data-ar="الاسم الأول">First Name</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName" data-en="Last Name" data-ar="اسم العائلة">Last Name</label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email" data-en="Email" data-ar="البريد الإلكتروني">Email</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="phone" data-en="Phone" data-ar="رقم الهاتف">Phone</label>
                                <input type="tel" id="phone" name="phone" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="address" data-en="Address" data-ar="العنوان">Address</label>
                                <input type="text" id="address" name="address" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city" data-en="City" data-ar="المدينة">City</label>
                                    <input type="text" id="city" name="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="zipCode" data-en="ZIP Code" data-ar="الرمز البريدي">ZIP Code</label>
                                    <input type="text" id="zipCode" name="zipCode" required>
                                </div>
                            </div>
                            
                            <h2 data-en="Payment Method" data-ar="طريقة الدفع">Payment Method</h2>
                            <div class="payment-methods">
                                <div class="payment-method">
                                    <input type="radio" id="creditCard" name="paymentMethod" value="creditCard" checked>
                                    <label for="creditCard" data-en="Credit Card" data-ar="بطاقة ائتمان">Credit Card</label>
                                </div>
                                <div class="payment-method">
                                    <input type="radio" id="paypal" name="paymentMethod" value="paypal">
                                    <label for="paypal" data-en="PayPal" data-ar="باي بال">PayPal</label>
                                </div>
                            </div>
                            
                            <div id="creditCardDetails" class="payment-details">
                                <div class="form-group">
                                    <label for="cardNumber" data-en="Card Number" data-ar="رقم البطاقة">Card Number</label>
                                    <input type="text" id="cardNumber" name="cardNumber" pattern="[0-9]{16}" placeholder="1234 5678 9012 3456">
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="expiryDate" data-en="Expiry Date" data-ar="تاريخ الانتهاء">Expiry Date</label>
                                        <input type="text" id="expiryDate" name="expiryDate" pattern="[0-9]{2}/[0-9]{2}" placeholder="MM/YY">
                                    </div>
                                    <div class="form-group">
                                        <label for="cvv" data-en="CVV" data-ar="رمز التحقق">CVV</label>
                                        <input type="text" id="cvv" name="cvv" pattern="[0-9]{3,4}" placeholder="123">
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn--primary btn--full" data-en="Place Order" data-ar="تأكيد الطلب">Place Order</button>
                        </form>
                    </div>
                    
                    <div class="order-summary">
                        <h2 data-en="Order Summary" data-ar="ملخص الطلب">Order Summary</h2>
                        <div id="order-items">
                            <!-- Order items will be dynamically inserted here -->
                        </div>
                        
                        <div class="order-totals">
                            <div class="total-row">
                                <span data-en="Subtotal" data-ar="المجموع الفرعي">Subtotal</span>
                                <span id="order-subtotal">$0.00</span>
                            </div>
                            <div class="total-row">
                                <span data-en="Shipping" data-ar="الشحن">Shipping</span>
                                <span data-en="Free shipping" data-ar="شحن مجاني">Free shipping</span>
                            </div>
                            <div class="total-row total">
                                <span data-en="Total" data-ar="الإجمالي">Total</span>
                                <span id="order-total">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Footer Component Container -->
    <div id="footer-container"></div>
    
    <!-- Main Script -->
    <script type="module">
    import componentLoader from "./src/utils/component-loader.js";

    document.addEventListener("DOMContentLoaded", async () => {
        try {
            const currentLang = document.documentElement.getAttribute("lang") || "en";

            // Wait for components to load first
            await componentLoader.initializeComponents({
                "./src/components/header.html": "#header-container",
                "./src/components/footer.html": "#footer-container",
            }, { language: currentLang });

            // Now initialize functionality AFTER components are loaded
            initializeTheme();
            initializeMobileMenu(); // ✨ ADD THIS LINE

            // Note: The theme/lang toggles will be handled by main.js,
            // but the mobile menu needs this special handling because of the dynamic load.

            console.log("Components loaded successfully");
        } catch (error) {
            console.error("Error loading components:", error);
        }
    });

    // ✨ ADD THIS FUNCTION
    function initializeMobileMenu() {
        const mobileMenuToggle = document.querySelector(".mobile-menu-toggle");
        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener("click", toggleMobileMenu);
        }
    }
</script>
    
    <script src="src/scripts/main.js"></script>
    <script src="src/scripts/auth.js"></script>
</body>
</html>